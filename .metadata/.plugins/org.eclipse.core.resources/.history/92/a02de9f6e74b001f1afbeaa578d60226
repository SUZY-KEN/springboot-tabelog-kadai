<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<div th:replace="~{fragment::meta}"></div>
	<div th:replace="~{fragment::scripts}"></div>
	<title>会社情報</title>
</head>

<body>

	<div th:replace="~{fragment::header}"></div>
	
	<main>
		<div>
			
<!--ログインアウト時の動作-->
			<div class="container pt-4 pb-5 samuraitravel-container">
                <div th:if="${param.loggedIn}" class="alert alert-info">
                    ログインしました。
                </div>  
                
                <div th:if="${param.loggedOut}" class="alert alert-info">
                    ログアウトしました。
                </div>
				
				<div th:if="${successMessage}" class="alert alert-info">
                    <span th:text="${successMessage}"></span>
                </div>   
				
				<div th:if="${errorMessage}" class="alert alert-info">
                    <span th:text="${errorMessage}"></span>
                </div>   
            </div>
			
<!--検索フォーム-->
			<form method="get" th:action="@{/restaurants}">
				<input type="hidden" th:value="0" name="price">
				<div>
					<input type="text"name="nameKeyword" th:value="${nameKeyword}"  placeholder="お探しの店舗名を入力してください">
				</div>
				<div>
					<select name="category">
							<option value="" hidden>カテゴリを選択して下さい</option>
							<div  th:each="category:${categoryList}">
								<option  th:value="${category.getId()}" th:text="${category.getName()}"></option>
							</div>
						
					</select>
				</div>	
				<div>
					<button type="submit">検索</button>
				</div>
				
				
			</form>
				
		</div>
		
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
		                        <span class="navbar-toggler-icon"></span>
		                    </button>
		                    
		                    <div class="collapse navbar-collapse" id="navbarSupportedContent">                                    
		                        <ul class="navbar-nav ms-auto">    
		                            <!-- 未ログインであれば表示する -->
		                            <li class="nav-item" sec:authorize="isAnonymous()">
		                                <a class="nav-link" th:href="@{/login}">ログイン</a>
		                            </li>                                                      
		                    
		                            <!-- ログイン済みであれば表示する --> 
		                            <li class="nav-item dropdown" sec:authorize="hasRole('ROLE_GENERAL')">
		                                <a id="navbarDropdownGeneral" class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" v-pre>
		                                    <span sec:authentication="principal.user.name"></span>
		                                </a>
		        
		                                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownGeneral">                                                                  
		                                    <a class="dropdown-item samuraitravel-dropdown-item" th:href="@{/logout}" onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
		                                        ログアウト
		                                    </a>
		                                    <form class="d-none" id="logout-form" th:action="@{/logout}" method="post"></form>                                     
		                                </div>
		                            </li>                       
		                                
		                            <!-- 管理者であれば表示する -->    
		                            <li class="nav-item dropdown" sec:authorize="hasRole('ROLE_ADMIN')">
		                                <a id="navbarDropdownAdmin" class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" v-pre>
		                                    管理者メニュー
		                                </a>
		        
		                                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownAdmin">                                                                                            
		                                    <a class="dropdown-item samuraitravel-dropdown-item" th:href="@{/admin/houses}">民宿一覧</a>                                                                                                     
		                                                              
		                                    <div class="dropdown-divider"></div>
		                                    
		                                    <a class="dropdown-item samuraitravel-dropdown-item" th:href="@{/logout}" onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
		                                        ログアウト
		                                    </a>
		                                    <form class="d-none" id="logout-form" th:action="@{/logout}" method="post"></form> 
		                                </div>
		                            </li>                           
		                        </ul>       
		                   </div>                         
		
	</main>
	
	
	<div th:replace="~{fragment::footer}"></div>
	<div th:replace="~{fragment::scripts}"></div>
</body>
</html>