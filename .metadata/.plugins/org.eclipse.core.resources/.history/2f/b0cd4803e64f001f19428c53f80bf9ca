package com.example.nagoyameshi.service;

import java.util.List;

import org.springframework.stereotype.Service;

import com.example.nagoyameshi.csvData.UserCsvData;
import com.example.nagoyameshi.repository.UserRepository;
import com.fasterxml.jackson.dataformat.csv.CsvMapper;
import com.fasterxml.jackson.dataformat.csv.CsvSchema;

@Service
public class CsvService {
	
	
    private final CsvMapper mapper;
    private  CsvSchema csvSchema;
    
    private final UserRepository userRepository;
    

  
    public CsvService(CsvMapper mapper, CsvSchema csvSchema,UserRepository userRepository) {
        this.csvSchema = csvSchema;
        this.mapper = mapper;
        this.userRepository=userRepository;
    }

    
    public CsvSchema getCsvHeaderUser()
    {
    	csvSchema=mapper.schemaFor(UserCsvData.class).withHeader();
    	return csvSchema;
    }
    
    public String writeCsvTextUser(List<UserCsvData>csvdataList,CsvSchema csvSchema)
    {
    	return mapper.writer(csvSchema).writeValueAsString(csvdataList);
    }
}
