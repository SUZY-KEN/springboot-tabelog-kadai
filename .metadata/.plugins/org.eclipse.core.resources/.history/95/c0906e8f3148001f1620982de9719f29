<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">

<head>
	<div th:replace="~{fragment::meta}"></div>
	<title>店舗一覧</title>
</head>

<body>

	<div th:replace="~{fragment::header}"></div>
	
	<main>
		
<!--価格並び替え-->
		<div>
			<form method="get"th:action="@{/restaurants}" >
				<select name="価格順">
					<option th:value="1">価格の安い順</option>
					<option th:value="2">価格の高い順</option>
				</select>
				<button type="submit">並び替え</button>
			</form>
		</div>
		
		<div>
			<div>                                
	             <p th:if="${restaurantsPage.getTotalPages() > 1}" th:text="${'検索結果：' + restaurantsPage.getTotalElements() + '件' + '（' + (restaurantsPage.getNumber() + 1) + ' / ' + restaurantsPage.getTotalPages() + ' ページ）'}"></p> 
	             <p th:unless="${restaurantsPage.getTotalPages() > 1}" th:text="${'検索結果：' + restaurantsPage.getTotalElements() + '件'}"></p>                                 
	         </div> 

				
<!--各店舗情報-->
			<div th:each="restaurants:${restaurantsPage}">
				
				<a th:href="@{/restaurants/show/__${restaurants.getId()}__}">
					<div>
						<h3 th:text="${restaurants.getName()}" >a</h3>
						
		<!--イメージ後で作る-->
						<div>
							<img th:if="${restaurants.getImage()}" th:src="###"></img>
						</div>
						
						<div>
							<p th:text="${restaurants.getCategory().getName()}"></p>
							
	<!--評価を平均して整数値に丸める仕組みは後で作る-->
							<p th:if="${restaurants.getEvalues()}==0">&#9734;&#9734;&#9734;&#9734;&#9734;</p>
							<p th:if="${restaurants.getEvalues()}==1">&#9733;&#9734;&#9734;&#9734;&#9734;</p>
							<p th:if="${restaurants.getEvalues()}==2">&#9733;&#9733;&#9734;&#9734;&#9734;</p>
							<p th:if="${restaurants.getEvalues()}==3">&#9733;&#9733;&#9733;&#9734;&#9734;</p>
							<p th:if="${restaurants.getEvalues()}==4">&#9733;&#9733;&#9733;&#9733;&#9734;</p>
							<p th:if="${restaurants.getEvalues()}==5">&#9733;&#9733;&#9733;&#9733;&#9733;</p>
	
							<p th:text="${'住所：'+restaurants.getAddress()}"></p>
							<p th:text="${#numbers.formatInteger(restaurants.getPrice(),1,'COMMA')+'円～'}"></p>
						</div>
					</div>
				</a>
				
				
			</div>
		</div>	
			
		<!--店舗ページネーション設定-->
		<div th:if="${restaurantsPage.getTotalPages()>1}" >
			<nav aria-label="店舗一覧ページ">
				<ul>
					<li>
						<sapn th:if="${restaurantsPage.isFirst()}">前</sapn>
						<a th:unless="${restaurantsPage.isFirst()}" th:href="@{/restaurants(page=${restaurantsPage.getNumber()-1},nameKeyword=${nameKeyword},category=${category},price=${price})}">前</a>
					</li>
					
					<li th:each="i : ${#numbers.sequence(0, restaurantsPage.getTotalPages() - 1)}" class="page-item">
                        <span th:if="${i == restaurantsPage.getNumber()}"  th:text="${i + 1}"></span>
                        <a th:unless="${i == restaurantsPage.getNumber()}" th:href="@{/restaurants(page = ${i},nameKeyword=${nameKeyword},category=${category},price=${price})}" th:text="${i + 1}"></a>
                    </li>
					
					<li>
						<sapn th:if="${restaurantsPage.isLast()}">次</sapn>
						<a th:unless="${restaurantsPage.isLast()}" th:href="@{/restaurants(page=${restaurantsPage.getNumber()+1},nameKeyword=${nameKeyword},category=${category},price=${price})}">次</a>
					</li>

					
				</ul>
				
			</nav>
			
		</div>


	</main>
	
	
	<div th:replace="~{fragment::footer}"></div>
</body>
</html>